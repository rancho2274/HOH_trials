<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Monitoring Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f7fa;
      color: #00395D;
    }
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 220px;
      height: 100vh;
      background-color: #ffffff;
      padding-top: 20px;
      border-right: 1px solid #e0e0e0;
    }
    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 22px;
      color: #00395D;
    }
    .sidebar a {
      padding: 15px 20px;
      color: #999;
      text-decoration: none;
      display: flex;
      align-items: center;
      font-weight: 500;
      transition: all 0.2s;
    }
    .sidebar a i {
      margin-right: 10px;
    }
    .sidebar a.active, .sidebar a:hover {
      background-color: #0072CE;
      color: white;
      border-left: 4px solid #005a8c;
    }
    .main-content {
      margin-left: 220px;
      padding: 30px;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    }
    .card h4 {
      margin: 0;
      color: #0072CE;
    }
    .card .value {
      font-size: 24px;
      font-weight: bold;
      color: #00395D;
      margin-top: 5px;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>System View</h2>
    <a href="#" onclick="showTab('main')" class="active"><i class="fas fa-chart-pie"></i>Overview</a>
    <a href="#" onclick="showTab('auth')"><i class="fas fa-lock"></i>Authentication</a>
    <a href="#" onclick="showTab('search')"><i class="fas fa-search"></i>Search</a>
    <a href="#" onclick="showTab('booking')"><i class="fas fa-calendar-check"></i>Booking</a>
    <a href="#" onclick="showTab('payment')"><i class="fas fa-credit-card"></i>Payment</a>
    <a href="#" onclick="showTab('feedback')"><i class="fas fa-comment-dots"></i>Feedback</a>
  </div>

  <div class="main-content">
    <div id="main" class="tab-content active">
      <div class="cards-container">
        <div class="card">
          <h4>Total Logs</h4>
          <div class="value">{{ stats.total_logs }}</div>
        </div>
        <div class="card">
          <h4>Anomalies Detected</h4>
          <div class="value">{{ stats.anomalies }} ({{ stats.anomaly_percent }}%)</div>
        </div>
        <div class="card">
          <h4>Avg Normal Response</h4>
          <div class="value">{{ stats.normal_avg }} ms</div>
        </div>
        <div class="card">
          <h4>Avg Anomalous Response</h4>
          <div class="value">{{ stats.anomalous_avg }} ms</div>
        </div>
      </div>
      <iframe src="http://localhost:5601/app/dashboards#/view/overview-dashboard-id?embed=true"></iframe>
    </div>

    <div id="auth" class="tab-content">
      <h3>Authentication Logs</h3>
      <iframe src="http://localhost:5601/app/dashboards#/view/auth-dashboard-id?embed=true"></iframe>
    </div>

    <div id="search" class="tab-content">
      <h3>Search Logs</h3>
      <iframe src="http://localhost:5601/app/dashboards#/view/search-dashboard-id?embed=true"></iframe>
    </div>

    <div id="booking" class="tab-content">
      <h3>Booking Logs</h3>
      <iframe src="http://localhost:5601/app/dashboards#/view/booking-dashboard-id?embed=true"></iframe>
    </div>

    <div id="payment" class="tab-content">
      <h3>Payment Logs</h3>
      <iframe src="http://localhost:5601/app/dashboards#/view/payment-dashboard-id?embed=true"></iframe>
    </div>

    <div id="feedback" class="tab-content">
      <h3>Feedback Logs</h3>
      <iframe src="http://localhost:5601/app/dashboards#/view/feedback-dashboard-id?embed=true"></iframe>
    </div>
  </div>

  <script>
    function showTab(tabId) {
      const tabs = document.querySelectorAll('.tab-content');
      const links = document.querySelectorAll('.sidebar a');
      tabs.forEach(tab => tab.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      links.forEach(link => link.classList.remove('active'));
      event.target.classList.add('active');
    }
  </script>
</body>
</html>