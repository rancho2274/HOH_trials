{% extends "base.html" %}
{% block content %}
<div class="header">
  <h2>Live API Health: {{ api_name }}</h2>
  <button class="refresh-btn" onclick="refreshDashboard()">
    <i class="fas fa-sync-alt"></i> Refresh
  </button>
</div>

<div class="cards">
  <div class="card">
    <h4>Total Logs</h4>
    <h3 id="total-logs">{{ stats.total_logs|default('0') }}</h3>
    <small id="total-logs-note" class="green">+0 this month</small>
  </div>
  <div class="card">
    <h4>Active Issues</h4>
    <h3 id="active-issues">{{ stats.anomalies|default('0') }}</h3>
    <small id="active-issues-note" class="red">+0 from yesterday</small>
  </div>
  <div class="card">
    <h4>Average Response</h4>
    <h3 id="avg-response">{{ stats.normal_avg|default('0') }}ms</h3>
    <small id="avg-response-note" class="green">0.0ms improvement</small>
  </div>
  <div class="card">
    <h4>System Health</h4>
    <h3 id="system-health">{{ (100 - stats.anomaly_percent|default(0))|round }}%</h3>
    <small id="system-health-note" class="{% if stats.anomaly_percent > 5 %}red{% else %}green{% endif %}">+0% this week</small>
  </div>
</div>

<script>
  function refreshDashboard() {
    window.location.reload();
  }
</script>
{% endblock %}